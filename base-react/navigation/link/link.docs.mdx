---
description: 'A standard, cross routing-system Link'
labels: ['react', 'routing', 'navigation', 'link', 'context', 'nav']
---

import { NavigationProvider } from './navigation-provider';
import { Link } from './link';

An injected link that will work across different applications and routing systems.
Simply inject your relevant implementation using the `<NavigationProvider>`, and the link is good to go.

### Motivation

If you to create a reusable component, say a `<Card>`, and embed it with a link,
you might run into trouble trying to use it outside your original application.

```tsx
import Link from 'next/link'

const Card = (person) => <Link href={person.homepage}>{person.name}<Link>;
```

This is because different routing systems have different approaches to routing, and they are incompatible with each other:
a [NextJS Link](https://nextjs.org/docs/api-reference/next/link) would not work in a React Router application, since it is expecting a [React Router Link](https://v5.reactrouter.com/web/api/Link), and vice versa.

<div style={{display: 'flex', flexWrap: 'wrap', gap: 8}}>

```tsx
function NextjsApp() {
  // this will work fine
  return <Card person={person} />;
}
```

```tsx
function ReactRouterApp() {
  // this will throw an error
  return <Card person={person} />;
}
```

</div>

This component solves this incompatibility by providing an abstract link, and lets the consuming application provide the actual implementation.

## Basic usage

When the Navigation Provider is absent, the Link defaults to a native `a` tag.  
This way, components using this Link will always work, even without context.

```tsx
import { Link } from '@teambit/base-react.navigation.link';

function App() {
  return (
    <>
      {/* this will render <a href="plguins">Click me!</a> */}
      <Link href="/plugins">Click me!</Link>
    </>
  );
}
```

### Using the link with React Router

For using `react-router`, use our existing implementation - [React Router Adapter](https://bit.dev/teambit/ui-foundation/ui/navigation/react-router-adapter).  
Note that you will have to provide the context needed for React Router, and perform navigation the with the tools provided by react-router.

```tsx
import { BrowserRouter, Route, Routes } from 'react-router-dom';
import { NavigationProvider, Link } from '@teambit/base-react.navigation.link';
import { reactRouterAdapter } from '@teambit/ui-foundation.ui.navigation.react-router-adapter';

export function App() {
  return (
    <BrowserRouter>
      <NavigationProvider implementation={reactRouterAdapter}>
        {/* this link won't refresh the entire page, and will use the React Router link. */}
        <Link href="/plugins">Click me!</Link>

        <Routes>
          <Route path="/plugins">plugins</Route>
        </Routes>
      </NavigationProvider>
    </BrowserRouter>
  );
}
```

### Using with NextJS

Coming soon..

### Custom usage

To tailor an implementation to your needs, declare these variables:

```tsx
import { RouterContextType, useRouter } from '@teambit/base-react.navigation.link';

const externalAttr = { rel: 'noopener', target: '_blank' };

const vanillaNav: RouterContextType = {
  Link: ({ href, children, active, activeClassName, activeStyle }) => {
    const location = vanillaNav.useLocation();
    const isActive = active ?? (href && location?.pathname && href.includes(location.pathname));

    return <a href={href} className={isActive && activeClassName} style={isActive && activeStyle}>{children}</a>
  }
  useLocation: () => {
    return typeof window === 'undefined' ? undefined : window.location;
  },
};
```

This is obviously, a naive implementation, but you can now use it in your code:

```tsx
import { vanillaNav } from '@org/core-react.navigation.vanilla-navigation';
import { NavigationProvider, Link, LinkProps, useLocation } from '@teambit/base-react.navigation.link';

function App() {
  return (
    <NavigationProvider implementation={vanillaNav}>
      <NavTab href="/plugins">plugins</NavTab>
      <PluginsPage />
    </NavigationProvider>
  );
}

function NavTab(props: LinkProps) {
  return <Link activeStyle={{ background: 'lightblue' }} {...props} />;
}

function PluginsPage() {
  const { pathname } = useLocation() || {};

  if (pathname != '/plugins') return null;
  return <div>Settings page</div>;
}
```

Try it out!

```tsx live
() => {
  const navA = {
    Link: ({ children, ...props }) => <a {...props}>{children} ðŸ”—</a>,
  };

  const navB = {
    Link: ({ style, children, ...props }) => (
      <a {...props} style={{ textDecoration: 'underline', fontWeight: 'bolder', cursor: 'pointer', ...style }}>
        {children} âœ¦
      </a>
    ),
  };

  return (
    <div>
      <NavigationProvider implementation={navA}>
        <Link>A Link</Link>
      </NavigationProvider>

      <br />

      <NavigationProvider implementation={navB}>
        <Link>B Link</Link>
      </NavigationProvider>
      <br />
    </div>
  );
};
```
