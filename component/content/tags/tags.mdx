import { Image } from '@teambit/docs.ui.zoomable-image';
import firstTag from './first-tag.png';
import componentHistory from './component-history-ui.png';

# Tag version

A Tag is an immutable and exportable Component version that is tagged with a release version.
Release versions follow the SemVer specification, to communicate to consumers of that component, how to use it safely.

The tag command runs the Component's Build and Tag pipelines before it creates a new version (which also includes the generated data and artifacts).
The generated version is stored in the Local Scope, where it can be exported to a Remote Scope.


## Tag a Component

To tag a single component run the following:

```
bit tag COMPONENT_ID [--ver SEMANTIC_VERSION] [--message TAG_MESSAGE]
```
For example:

```bash
bit tag ui/text --ver 1.0.0 --message "my first vesion"
```
Once the Tag pipeline is completed, the new Tag can be seen in the Component's changelog, in the UI:

<Image src={firstTag} />

To review a Component's changelog in the terminal, use the `bit log` command. For example:


```bash
$ bit log ui/heading

tag 1.0.0 (e0121fa8db05451c170b7204c95d14215c8b76b5)
author: itaymendel <itay@mydomain.com>>
date: 10/27/2021, 5:41:00 AM

      my first version
```

Now that you have a new version, you can also run `status` to see that the Component is tagged:

```bash
bit status
```

```bash
new components
(use "bit tag --all [version]" to lock a version with all your changes)

     > pages/welcome ... ok
     > ui/card ... ok
     > ui/heading ... ok
                         
staged components
(use "bit export <remote_scope> to push these components to a remote scope")

     > ui/text. versions: 1.0.0 ... ok
```

## Semantic versioning

Bit adheres to Semantic Versioning as defined by [SemVer](https://semver.org/) when versioning components. This way any package manager like npm, yarn or pnpm can consume the comopnent as a dependency to a project.  
The `tag` command has several features you can use for versioning:

```bash
bit tag --all --major --message "my version message"  # Version all modified and new components with a major version.
bit tag --all --minor --message "my version message"  # Version all modified and new components with a minor version.
bit tag "ui/*" --patch --message "my version message" # Version components matching the pattern with a patch version.
bit tag ui/text --message "my version message"        # Version a specific component with default increment (patch).
```

## Undo a tag

Run the following to undo a Component tag:

```
bit untag COMPONENT_ID TAG_VERSION
```

:::info
`untag` reverts the latest versioning but does not restore changes to files.
:::

For example, `company.scop/ui/text` has only one version (`1.0.0`) in the Workspace.
This version has not been exported yet, which means it can be undone:

```
bit untag company.scop/ui/heading 1.0.0
```

Since `company.scop/ui/heading` has only one version, undoing that versioning restores its status to `new`. This can be validated by running `bit status`:
```
$ bit status

new components
(use "bit tag --all [version]" to lock a version with all your changes)

     > ui/text ... ok
                         
...
```

### Explore a Component's version history
To explore a Component's previous versions, use the version dropbox, placed near the top-right corner of the Component's UI.

Each version includes everything that makes a Component such as, its documentation, compositions, configurations, dependencies, and more.

<Image src={componentHistory} />


## Auto-tag dependent Components

When a component is tagged, Bit automatically tags all it direct and indirect dependent Components. Auto-tag has two basic rules:

- Components are always auto tagged with a patch version, regardless of the bump type applied on the dependency.
- Tagging is propagated to the dependency chain of the component.

### Skip Auto-tag

You may skip the auto-tag behavior for a component by using the `--skip-auto-tag` flag:

```bash
bit tag ui/heading --message "my version message" --skip-auto-tag
```
