import { WsConfigVsCompConfig } from '@teambit/docs.content.guides.ws-config-vs-comp-config';
import { Image } from '@teambit/docs.ui.zoomable-image';
import componentConfig from './comp-config.png';
import devFilesConfig from './dev-files-config.png';
import devFilesScreenShot from './dev-files-screenshot.png';

# Component Configuration

A Component's configuration determines the properties of a Component, like its package name, dependencies, dev files, and more.
It is essentially, a list of Aspects that are applied on a Component and their corresponding configs. One very prominent Aspect is the specific Env a Component uses.

For example, the following sets the React Env as this Component's Env, and defines this Component's test files as development files:

```json
{
  "teambit.envs/envs": {
    "env": "teambit.react/react"
  },
  "teambit.component/dev-files": {
    "devFilePatterns": ["**/*.spec.*"]
  }
}
```

Aspects are applied on a Component using its component.json and using Variants. Core Aspects are applied by default and will not be listed in either of the two.
Each Aspect's config can be configured manually in component.json and Variants, and programmatically, using that Aspect's API.
These various Aspect configurations are calculated by Bit into a coherent list of configurations.

For example, the following diagram shows the Dev Files aspect applied on `teambit.base-ui/elements/image` component. This aspect is configured manually but also programmatically.
Compositions aspect, Docs aspect and Tester aspect use the Dev File aspect API to define their files as dev files.

<Image src={devFilesConfig} />

The following command displays the `teambit.base-ui/elements/image` Component configuration:

```
bit show teambit.base-ui/elements/image
```

The output shows the the Dev Files aspect (`teambit.component/dev-files`) applied on that component (see the `extensions` section).
It also shows the result of that ASpect being applied on that Component. Some of that Component files are defined as dev files. To the right of each file, you'll find the Aspect that configured that types of files as dev files (using the Dev Files API):

```
┌───────────────────┬───────────────────────────────────────────────────────────┐
│ id                │ teambit.base-ui/elements/image@1.0.0                      │
├───────────────────┼───────────────────────────────────────────────────────────┤
│ ...               │ ...                                                       │
├───────────────────┼───────────────────────────────────────────────────────────┤
│ dev files         │ image.spec.tsx (teambit.defender/tester)                  │
│                   │ image.composition.tsx (teambit.compositions/compositions) │
│                   │ image.docs.mdx (teambit.docs/docs)                        │
├───────────────────┼───────────────────────────────────────────────────────────┤
│ extensions        │ teambit.dependencies/dependency-resolver                  │
│                   │ teambit.pkg/pkg                                           │
│                   │ teambit.react/react                                       │
│                   │ teambit.component/dev-files                               │
│                   │ teambit.compositions/compositions                         │
│                   │ teambit.docs/docs                                         │
│                   │ teambit.envs/envs                                         │
│                   │ teambit.defender/tester                                   │
│                   │ teambit.pipelines/builder                                 │
├───────────────────┼───────────────────────────────────────────────────────────┤
│ ...               │ ...                                                       │
└───────────────────┴───────────────────────────────────────────────────────────┘
```

You can examine this configuration in the UI, as well. Use the configuration icon, placed to the right of the top bar:

<Image src={devFilesScreenShot} />

## Diff-ing configuration

The state of component configuration is stored for each version or snapshot of a component. As you modify `workspace.jsonc` or `component.json`, the configuration of a component may change. This triggers Bit to mark the component as **modified**.

Run `diff` to understand which configuration was modified for a component.

```bash
bit diff ui/graph/bubble-graph
```

```bash
--- extensionDependencies 1.11.0 original
+++ extensionDependencies 1.11.0 modified
teambit.community/envs/community-react
- teambit.community/envs/community-react@1.11.0
```

In this example we removed the `teambit.community/envs/community-react` aspect from the component, forcing an configuration diff.  
From here you may decide you want this configuration to be exported. Run `tag` or `snap` to create a new version for the component where the only change is it's config.

## Workspace config vs Component config

<WsConfigVsCompConfig />
