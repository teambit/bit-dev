import { Image } from '@teambit/docs.ui.zoomable-image';
import componentObjectsDemoImg from './component-objects-demo.png';
import objectsImag from './objects.png';

# Component Objects

When [tagging](tags) or [snapping](snaps) a component, bit persists the versioned data (the component source files, config, metadata, and artifacts) in git-like objects.

Component objects are stored in [Scopes](/docs/workspace/local-scope) ([Local Scopes](/workspace/local-scope) and [Remote Scopes](/scope/creating-scopes)), using the [content-addressable storage](https://en.wikipedia.org/wiki/Content-addressable_storage) method.
They are either copied to or from remote scopes, when exported or imported (respectively).

```bash
// persist component config, source files, artifacts and metadata as objects
// update the 'component' object with reference to the new version
$ bit tag teambit.base-react/buttons/button
```

```bash
// copy component objects of 'buttons/button' from the local scope to remote scope 'teambit.base-react'
$ bit export teambit.base-react/buttons/button
```

```bash
// copy component objects of 'buttons/button' from remote scope 'teambit.base-react' to the local scope (and checkout latest version)
$ bit import teambit.base-react/buttons/button
```

```bash
// copy component objects of 'buttons/button' from remote scope 'teambit.base-react' to the local scope (and install the component's package)
$ bit install @teambit/base-react.buttons.button
```

To see all objects in your Local Scope:

```bash
bit cat-scope
```

```bash
┌──────────────────────────────────────────────────┬───────────────────────────────────────────────┐
│ id                                               │ Object                                        │
├──────────────────────────────────────────────────────────────────────────────────────────────────┤
│ teambit.base-react/buttons/button                │ obj: e603d90cf7c889b7ab9a9726a17123a27a167b8f │
├──────────────────────────────────────────────────┼───────────────────────────────────────────────┤
│ teambit.base-ui/elements/dots-loader             │ obj: e8e067063f355d12be2af049d058f153abed7d41 │
├──────────────────────────────────────────────────┼───────────────────────────────────────────────┤
│ teambit.documenter/ui/copy-box                   │ obj: e9c696fd745a6d28d8dff813986da1142e8801bb │
├──────────────────────────────────────────────────┼───────────────────────────────────────────────┤
│ teambit.base-react/content/image                 │ obj: ed0b933b3f51b7c5403f5a75e41c67e3f453ea3b │
├──────────────────────────────────────────────────┼───────────────────────────────────────────────┤
│ teambit.design/ui/external-link                  │ obj: ee077bbb362fe75f07fef024066d13dadad1ab07 │
├──────────────────────────────────────────────────┼───────────────────────────────────────────────┤
│ teambit.base-ui/text/paragraph                   │ obj: f050ffae25607a81752cfbe7b0e96fe548376a24 │
├──────────────────────────────────────────────────┼───────────────────────────────────────────────┤
│ teambit.documenter/theme/theme-context           │ obj: f2eb682b13e32dfaf7a8c4b3132339f57526ae24 │
├──────────────────────────────────────────────────┼───────────────────────────────────────────────┤
│ teambit.base-ui/routing/native-nav-link          │ obj: f4e46c640c98521c7e08b7dbdcd6231250ded934 │
├──────────────────────────────────────────────────┼───────────────────────────────────────────────┤
│ teambit.design/ui/buttons/button                 │ obj: f54cf2199ebea77aeff811b3d03c3b9f89e040ad │
└──────────────────────────────────────────────────┴───────────────────────────────────────────────┘
```

Just like git objects, Bit objects are named with a [SHA-1](https://en.wikipedia.org/wiki/SHA-1) hash.
The above output table shows the mapping between each component ID and its component-object hash.

## Object types

<Image src={objectsImag} />

### Component

A component object stores general information about a component. That includes its component id, scope name, references to its version objects, and more.
The component’s hash is not based on its content since it is not immutable. It is updated whenever a component gets tagged with a new release version.
Run `bit cat-object -p <component-hash>` to see the component object content.

For example, to examine `teambit.base-react/buttons/button`:

```
bit cat-object -p e603d90cf7c889b7ab9a9726a17123a27a167b8f
```

```bash
{
  "name": "buttons/button",
  "scope": "teambit.base-react",
  "versions": {
    // ...
    "1.8.21": "5d93b9c90096952038b3654417206fd27b485e28",
    "1.8.22": "40912fdea8a89cf24cbb87ec4bf25703442aa7d7",
    "1.8.23": "0fb0f2e884caa591e4a07e413e42fcf6b79f29ed",
    "1.8.24": "32479898826d2df2ad0e6845b408035dc24fc5d0",
    "1.8.25": "1b58b0b7c0a12c5f28fb852c2ba643a2ff47bbb7",
    "1.8.26": "79362d1cc55c0ea17524b0bdcfe5e35e91f2fb43"
  },
  "lang": "javascript",
  "deprecated": false,
  "bindingPrefix": "@teambit",
  "remotes": [
    {
      "url": "https://koykibc.scopes.bit.dev",
      "name": "teambit.base-react",
      "date": "1633356726283"
    }
  ],
  "schema": "1.0.0",
  "head": "79362d1cc55c0ea17524b0bdcfe5e35e91f2fb43"
}
```

### Version/Snap

The Version/Snap object contains the following information:

- The component file structure, with references to snapshots of the component’s source files (this section resembles Git’s ‘tree’ objects).
- References to snapshots of the component’s artifacts (compiler's output code, package, etc.)
- Component configuration (data regarding different Aspects used by the component and their config)
- Component metadata

:::note
A version object (a “commit”) can be created without creating a (SemVer) reference to it. This is done by using Snap.
:::

For example, use the hash for the latest version (`1.8.26`) of `teambit.base-react/buttons/button` to examine it:

```bash
bit cat-object -p 79362d1cc55c0ea17524b0bdcfe5e35e91f2fb43
```

```bash
{
  "files": [
    {
      "file": "1e46108fa156694935ef2581b5fc0fba40596660",
      "relativePath": "button.composition.tsx",
      "name": "button.composition.tsx",
      "test": false
    },
    {
      "file": "13f81e271a8f2e8bd9cd2f6f72422ecc7bb006cb",
      "relativePath": "button.docs.md",
      "name": "button.docs.md",
      "test": false
    },
    {
      "file": "ac7269e1188aafd59b676a717966880434d7bb81",
      "relativePath": "button.spec.tsx",
      "name": "button.spec.tsx",
      "test": false
    },
    {
      "file": "fcfaa6101ab4b555dd88b4c95e5f16cc70b735f6",
      "relativePath": "button.tsx",
      "name": "button.tsx",
      "test": false
    },
    {
      "file": "0d7dd06c20926499b60d528152302e4fdd1e81fb",
      "relativePath": "index.ts",
      "name": "index.ts",
      "test": false
    }
  ],
  "mainFile": "index.ts",
  "bindingPrefix": "@teambit",
    // ...
        ],
        "artifacts": [ ... ] // compiled output, package tar file, etc.
          },
        // ...
        ],
        "aspectsData": [
            // (data regarding the pkg, tester, etc...)
        ]
      },
      "name": "teambit.pipelines/builder"
    }
  ],
  "packageDependencies": {
       // ...
  },
  // ...
  "buildStatus": "succeed",
  "packageJsonChangedProps": {},
  "parents": [
    "1b58b0b7c0a12c5f28fb852c2ba643a2ff47bbb7"
  ]
}
```

### Source

Source objects are snapshots of the component’s source code, compiled code, and other generated artifacts.
Let’s have a look at the content of the following file:

To examine the content of the `button.compositions.ts` file, referenced from version `1.8.26` of `teambit.base-react/buttons/button`:

```bash
bit cat-object -p 1e46108fa156694935ef2581b5fc0fba40596660
```

```bash
import React from 'react';
import { Button } from './button';

export const BasicButton = () => <Button>click me</Button>;

export const ButtonWithAlert = () => (
  <Button onPress={() => alert('hello there!')}>click me</Button>
);

// ...
```

## Putting it all together

The below diagram shows the `.bitmap` file referencing to specific component versions to be used by the working directory.

:::note
Not all components are registered in the `.bitmap` file.
Some components are only imported to augment the information the workspace has regarding installed components (and not to be maintained by the workspace).
These components will be mapped in the Local Scope's `index.json` file.
:::

<Image src={componentObjectsDemoImg} />
