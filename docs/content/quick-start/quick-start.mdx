import { ComponentID } from '@teambit/component-id';
import { MemoryRouter, UNSAFE_LocationContext } from 'react-router-dom';
import { wideColumn } from '@teambit/base-ui.layout.page-frame';
import { ComponentCardGroup } from '@teambit/explorer.ui.gallery.component-card-group';
import { Subtitle } from '@teambit/docs.ui.subtitle';
// import { TopInventions } from '@learnbit/inventions.blocks.top-inventions';
import { BubbleHighlighter } from '@teambit/community.ui.bubble-highlighter';
import { ExcludeHighlighter } from '@teambit/react.ui.component-highlighter';
import { WhatIsBit } from '@teambit/bit.content.what-is-bit';
import { DrawerUI } from '@teambit/ui-foundation.ui.tree.drawer';
//TODO: Ran: you have cycles with WikiApp using ui/docs  => teambit.wiki/sections/wiki@0.0.7 => ui/docs
import { WikiApp } from '@teambit/wiki.apps.wiki';
import { ArchitectureBreakdown } from '@teambit/docs.blocks.component.architecture-breakdown';
import { ComponentThinkingProcess } from '@teambit/docs.ui.component-thinking-process';
import { Featured, cardsMock } from '@teambit/bit.quick-start.featured';
import { ComponentShowcase } from '@teambit/community.component-showcase';
import { wikiComponents } from './wiki';
// import { WikiGraph } from './graph';
import App from './app.mdx';
import Header from './header.mdx';
import styles from './quick-start.module.scss';

<Featured cards={cardsMock} />

<!--
<Subtitle>Welcome to the Bit documentation site! This site is composable.</Subtitle> -->

Welcome to the Bit documentation site! This site is a composition of independent components, built and maintained mostly by the [Docs](https://bit.dev/teambit/docs),
[Design](https://bit.dev/teambit/design) and [Community](https://bit.dev/teambit/community) teams here at Bit! It is built from React, Markdown and
Node components we have crafted specifically for the purpose and needs of this app.

## Introduction

During this quick start, you will learn to create your own **composable app**. We will show you how simple it is, to build even a complex app like a wiki when built from components!
In this example, we will use the components built for this documentation app.

<!-- Here is an example of what you will get: -->

<ComponentShowcase
  className={wideColumn}
  componentId="teambit.wiki/apps/wiki@1.90.3"
/>

<!-- stronger understanding for bottom-up thinking early on -->

<!-- Below is a **component-driven wiki** app that we composed from the components we used to build this documentation app. During this quick start, you will
create your own component-driven personal app from and learn how to use components to build to possibly anything. -->
<!-- During this quick start, you will build your first Bit building blocks and compose your first **component-driven personal app**. We will learn that components can help us
build better apps.  -->

<br />

<!--
<ExcludeHighlighter>
  <BubbleHighlighter
    componentId={ComponentID.fromString("teambit.wiki/apps/wiki")}
    showId
  >
    <UNSAFE_LocationContext.Provider value={null}>
      <MemoryRouter>
        <div className={styles.wiki}>
          <WikiApp />
        </div>
      </MemoryRouter>
    </UNSAFE_LocationContext.Provider>
  </BubbleHighlighter>
</ExcludeHighlighter>
 -->

<WhatIsBit />

### Learning Bit

There are few ways to get started with Bit.

- If you feel like **learning to use Bit without getting technical**, head over to the [Thinking in Components](/thinking-in-components). This will give you a good feeling of what
  is the thought behind building a component-driven software with Bit.
- If you are **familiar with Bit and its concepts**, and want to dive deep into a specific topic, head over to the different chapters on the Learn section.
  <!-- TODO: add a link to the learn section -->
  <!-- TODO: think of a way to direct non-technical people to thinking in components earlier on -->

The rest of this page, will guide you step by step through the different concepts of Bit and will help navigate through the docs and decide
which concepts to dive deeper into.

<!-- During this quick start, you will build choose your own favourite inventions, and build them into a component with a simple search functionality. Here is the product
spec. -->

## Installation

To get started, we would first have to make sure the `bit` binary is installed on your machine and configured to your `PATH`.

```bash
npx @teambit/bvm install
```

For a more advanced installation guide, [head to our installation section](/getting-started/installing-bit/installing-bit).

### Creating the workspace

The first step in the Bit journey is to create a [component development workspace](/workspaces). You can use the Bit workspace to either create, use or import components,
make changes to them, and export these changes back. Workspaces are tech-agnostic and allow development of components of all kinds. They can be used by a single developer
maintaining few components for a certain scope of work and exist on top of existing repositories or shared as a [Workspace component](/workspace/workspace-component).

:::tip
It is recommended to [create a bit.cloud account](https://bit.cloud/signup) prior to creating the workspace to ensure the right owner name for your components.
You can choose to host the Bit yourself, choose a name for the remote scope in which the component you be hosted.
:::

To create a new workspace, run:

```bash
bit new my-wiki --default-scope my-org.wiki
```

```bash
cd my-wiki
```

Start the Workspace UI console:

```bash
bit start
```

:::tip
It is recommended to open an editor like VSCode on the workspace to start editing the components source code. To learn more on [editor setup head here](/editor-setup).
:::

Bit was designed for gradual adoption and has a minimal footprint. Since components are isolated, Bit can easily co-exist next to other development tools,
across different projects. This tutorial demonstrates creating a new workspace, to [start from an existing project head here](/getting-started/installing-bit/add-to-existing-project).

In depth: Learn more about [Workspaces](/workspace/workspace-overview).

## Components

A component as an **independent, reusable product with an interface for using it**. You design the component interface for your own needs,
and iterate over time to increase support for needs as they come. Every component could serves you, teammates, fellow product teams, or even open source it for the use of
entire world.

Components are described by names and APIs, and contain source code implementation. They can be of different kinds like apps, pages, UI components, backend services and even content.
You can think of almost anything in components.

These are the components used for the wiki app example above. In the next steps, you will build your own components and use these component as a reference and example.

<!-- TODO: Oded component display and search -->

<ComponentCardGroup components={wikiComponents} />

<!--
[Thinking in components](/thinking-in-components) is a recursive process that starts at defining and the **immediate component we need**. Upon the definition of this
component, **think which components you wish you had now**. Search for these components, try to **use or collaborate on something that exists**,
otherwise **repeat the process with a new component that fulfills this exact need**. -->

## Create the component you need

Choosing the first component is an important step in the process in building a component-driven design. When choosing the first component, focus on choosing the most
tangible component, the one you can ideally use now. When building a component someone else is expected to use, try and agree on a clear API contract early on to minimize
the amount of uncertainty. Using components as a consumer early on the development process helps avoid uncertainty and achieve faster and more accurate results.

The usage occurances there is for a component, the better.

Building in components is a recursive process.

<!-- <WikiGraph /> -->

<ComponentThinkingProcess
  steps={[
    {
      id: ComponentID.fromString('teambit.wiki/apps/wiki'),
      content: <App />,
    },
    {
      id: ComponentID.fromString('teambit.wiki/blocks/header'),
      content: <Header />,
    },
    {
      id: ComponentID.fromString('teambit.wiki/blocks/footer'),
      content: <App />,
    },
    {
      id: ComponentID.fromString('teambit.wiki/sections/wiki'),
      content: <App />,
    },
    {
      id: ComponentID.fromString('teambit.wiki/content/welcome'),
      content: <App />,
    },
  ]}
/>

<!-- ### Define the component -->

<!-- [Naming the component](/) is the first challenge for building any component, and the most important one. When naming your component you are actually defining its owner, 
responsbility and goal.

- **Ownership.** Who will own the component. 
- **Kind.** Which kind of a component is that? UI? Module? Backend service? Applet?
- **Responsibility.** What kind this component is? What is the responsibility of the component?

Earliar we decided to give the ownership over the component to the `wiki` scope on the `my-org` organization in Bit Cloud and now we decided to name 
our first component: `apps / wiki`.

| Ownership      | Responsibility           |
|----------------|--------------------------|
| my-org.wiki    | apps / wiki-worldwide    |

Components are identified and named using a unique identifier called ["Component ID"](/components/structure/component-id).

### Generate a component skeleton

```bash
bit create react-app apps/wiki-worldwide
```

:::note
TODO: Support compile after create, and dependencies in templates. UNTIL THEN:
```bash
bit compile
bit install react-router@^5.0.0 @types/react-router@^5.0.0 react-router-dom@^5.0.0 @types/react-router-dom@^5.0.0
```
:::

Configure the app on your workspace configuration, via `workspace.json`:
```json
{
  "my-org.wiki/apps/wiki-worldwide": {},
}
```

Alternatively, you can `fork` the component from the demo above in to your project and start from there! 
```bash
bit import teambit.wiki/apps/wiki
```

Run the app:
```bash
bit run wiki-worldwide
```

### Think which components you wish you had


### Design the API

Think of your component API as a user interface. You are the first user of your component. Design the component to yourself. When designating a user interface we are always
starting from the user, what he needs? What are his constraints? What is he trying to achieve? Once understanding that API design becomes very easy and intuitive
his requirements? The more consumers there are, the better the API design would be.

Think about the requirements of your consumers, what do they need?

- API first. Think of the API as the user interface of your component.
- Build only the API you need.
- Extendability.



## Implement the component

You can build the component in isolation, or import any component you want to test it against! 
Let's say we would like to use this component on Bit docs, adding here to this section here!


```
bit import teambit.wiki/apps/wiki
```

### Implement your logic from the ground up


### Use components

```bash
$ bit install @learnbit/inventions.ui.invention-grid
```

:::note
You can configure the package manager of your choice in the `workspace.jsonc` file. Supported package managers
for `bit install` are currently [Yarn 2.0](/) and [pnpm](/).
:::

or alternatively you can fork and build your own, or just create a new component for it.

```bash
$ bit import learnbit.inventions/ui/invention-grid
```

Compose the `invention-grid` component into `amazing-inventions`.

```ts
import { InventionGrid } from '@learnbit/inventions.ui.invention-grid';
```

Now we create create  -->

## Collaborate

Now that we have done our work and all seems to be working locally, its time to share our changes and collaborate with others.  
Bit tells you exactly which components has changed.

```
$ bit status
```

### Create a remote scope

Earlier we have chosen a default Scope for our workspace. We need to either host our own scope, or use Bit Cloud.

### Create a Lane

```
$ bit lane create my-feature
```

### Export changes to a remote scope

```
bit export
```

### Be aware to how changes affect others

### Merge

## Think your "Quick Start" is better than ours?

If you think you have a quick start is better than ours, or just shows the same on a different tech stack or product.

## What's next?

- Read [Thinking in Components](/)
- Dive deeper into any of the topics.
